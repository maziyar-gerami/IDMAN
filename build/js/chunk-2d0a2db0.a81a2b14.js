(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a2db0"],{"0060":function(e,t,a){"use strict";a.r(t);var r=a("7a23"),s={class:"grid"},o={class:"col-12"},i={class:"card"},n={key:0,class:"text-center"},c={key:1},d={class:"mt-3"},l={key:0,class:"mt-5"},u={class:"formgrid grid"},p={class:"field col"},b={class:"field p-fluid"},f={for:"buffer._id"},h=Object(r["k"])("span",{style:{color:"red"}}," * ",-1),w={class:"field col"},O={class:"field p-fluid"},m={for:"buffer.temporaryCode"},j=Object(r["k"])("span",{style:{color:"red"}}," * ",-1),g={class:"formgrid grid"},k={class:"field col"},y={class:"field p-fluid"},v={for:"buffer.password"},C=Object(r["k"])("span",{style:{color:"red"}}," * ",-1),x={class:"mt-3"},P={class:"pl-2 ml-2 mt-0",style:{"line-height":"1.5"}},$={key:0},E={key:1},R={key:2},F={key:3},q={class:"field col"},Q={class:"field p-fluid"},T={for:"buffer.passwordRepeat"},_=Object(r["k"])("span",{style:{color:"red"}}," * ",-1);function B(e,t,a,B,M,U){var V=Object(r["K"])("ProgressSpinner"),I=Object(r["K"])("InputText"),D=Object(r["K"])("Divider"),A=Object(r["K"])("Password"),K=Object(r["K"])("Button");return Object(r["C"])(),Object(r["j"])("div",s,[Object(r["k"])("div",o,[Object(r["k"])("div",i,[Object(r["k"])("h3",null,Object(r["O"])(e.$t("changePassword")),1),M.loading?(Object(r["C"])(),Object(r["j"])("div",n,[Object(r["o"])(V)])):(Object(r["C"])(),Object(r["j"])("div",c,[Object(r["k"])("div",d,[Object(r["k"])("p",null,Object(r["O"])(e.$t("changePasswordText1")),1),Object(r["k"])("p",null,Object(r["O"])(e.$t("changePasswordText2")),1),Object(r["k"])("p",null,[Object(r["n"])(Object(r["O"])(e.$t("changePasswordText3"))+" ",1),Object(r["k"])("span",{style:{cursor:"pointer",color:"blue"},onClick:t[0]||(t[0]=function(t){return e.$router.push("/resetpassword")})},Object(r["O"])(e.$t("link")),1),Object(r["n"])(" "+Object(r["O"])(e.$t("changePasswordText4")),1)])]),M.getUsernamePassword?(Object(r["C"])(),Object(r["j"])("div",l,[Object(r["k"])("div",u,[Object(r["k"])("div",p,[Object(r["k"])("div",b,[Object(r["k"])("label",f,[Object(r["n"])(Object(r["O"])(e.$t("employeeNumber")),1),h]),Object(r["o"])(I,{id:"buffer._id",type:"text",class:Object(r["w"])(M.bufferErrors._id),modelValue:M.buffer._id,"onUpdate:modelValue":t[1]||(t[1]=function(e){return M.buffer._id=e})},null,8,["class","modelValue"])])]),Object(r["k"])("div",w,[Object(r["k"])("div",O,[Object(r["k"])("label",m,[Object(r["n"])(Object(r["O"])(e.$t("temporaryCode")),1),j]),Object(r["o"])(I,{id:"buffer.temporaryCode",type:"text",class:Object(r["w"])(M.bufferErrors.temporaryCode),modelValue:M.buffer.temporaryCode,"onUpdate:modelValue":t[2]||(t[2]=function(e){return M.buffer.temporaryCode=e})},null,8,["class","modelValue"])])])])])):Object(r["i"])("",!0),Object(r["k"])("div",{class:Object(r["w"])(M.getUsernamePassword?"":"mt-5")},[Object(r["k"])("div",g,[Object(r["k"])("div",k,[Object(r["k"])("div",y,[Object(r["k"])("label",v,[Object(r["n"])(Object(r["O"])(e.$t("password")),1),C]),Object(r["o"])(A,{id:"buffer.password",class:Object(r["w"])(M.bufferErrors.password),modelValue:M.buffer.password,"onUpdate:modelValue":t[3]||(t[3]=function(e){return M.buffer.password=e}),toggleMask:!0,autocomplete:"off",onKeydown:t[4]||(t[4]=Object(r["W"])((function(e){return U.checkup()}),["enter"]))},{footer:Object(r["U"])((function(){return[Object(r["o"])(D),Object(r["k"])("p",x,Object(r["O"])(e.$t("passwordRequirement")),1),Object(r["k"])("ul",P,[M.passwordQualityCheck.smallalphabet?(Object(r["C"])(),Object(r["j"])("li",$,Object(r["O"])(e.$t("passwordRequirementText1")),1)):Object(r["i"])("",!0),M.passwordQualityCheck.capitalalphabet?(Object(r["C"])(),Object(r["j"])("li",E,Object(r["O"])(e.$t("passwordRequirementText2")),1)):Object(r["i"])("",!0),M.passwordQualityCheck.number?(Object(r["C"])(),Object(r["j"])("li",R,Object(r["O"])(e.$t("passwordRequirementText3")),1)):Object(r["i"])("",!0),M.passwordQualityCheck.specialchar?(Object(r["C"])(),Object(r["j"])("li",F,Object(r["O"])(e.$t("passwordRequirementText4")),1)):Object(r["i"])("",!0),Object(r["k"])("li",null,Object(r["O"])(e.$t("passwordRequirementText5")+M.passwordQualityCheck.length+e.$t("passwordRequirementText6")),1)])]})),_:1},8,["class","modelValue"])])]),Object(r["k"])("div",q,[Object(r["k"])("div",Q,[Object(r["k"])("label",T,[Object(r["n"])(Object(r["O"])(e.$t("passwordRepeat")),1),_]),Object(r["o"])(A,{id:"buffer.passwordRepeat",class:Object(r["w"])(M.bufferErrors.passwordRepeat),modelValue:M.buffer.passwordRepeat,"onUpdate:modelValue":t[5]||(t[5]=function(e){return M.buffer.passwordRepeat=e}),toggleMask:!0,onpaste:"return false;",ondrop:"return false;",autocomplete:"off",onKeydown:t[6]||(t[6]=Object(r["W"])((function(e){return U.checkup()}),["enter"]))},null,8,["class","modelValue"])])])]),Object(r["o"])(K,{label:e.$t("confirm"),class:"p-button-success mt-3 mx-1",onClick:t[7]||(t[7]=function(e){return U.checkup()})},null,8,["label"])],2)]))])])])}var M=a("e6da"),U=a.n(M),V={name:"ChangePassword",data:function(){return{buffer:{_id:"",temporaryCode:"",password:"",passwordRepeat:""},bufferErrors:{_id:"",temporaryCode:"",password:"",passwordRepeat:""},passwordQualityCheck:{smallalphabet:!1,capitalalphabet:!1,number:!1,specialchar:!1,length:"8",regex:"^"},loading:!1,getUsernamePassword:!1}},mounted:function(){var e=new URL(window.location.href);"undefined"!==typeof e.searchParams.get("i")&&null!==e.searchParams.get("i")||(this.getUsernamePassword=!0),this.changePasswordRequestMaster("getPasswordQuality")},methods:{changePasswordRequestMaster:function(e){var t=this,a="";if("Fa"===this.$i18n.locale?a="fa":"En"===this.$i18n.locale&&(a="en"),"changePassword"===e){if(!this.getUsernamePassword){var r=new URL(window.location.href),s=decodeURIComponent(escape(window.atob(r.searchParams.get("i")))).split(" - ");this.buffer._id=s[0],this.buffer.temporaryCode=s[1]}this.loading=!0,this.axios({url:"/api/public/changePassword",method:"PUT",params:{lang:a},headers:{"Content-Type":"application/json"},data:JSON.stringify({userId:t.buffer._id,currentPassword:t.buffer.temporaryCode,newPassword:t.buffer.password}).replace(/\\\\/g,"\\")}).then((function(e){if(200===e.data.status.code){var a=0,r=window.setInterval((function(){1===a&&clearInterval(r),++a}),2e3);t.axios({url:"/cas/login?service="+window.location.protocol+"//"+window.location.hostname+"/login/cas",method:"GET"}).then((function(e){var a=document.createElement("html");a.innerHTML=e.data;var r=a.getElementsByTagName("form")[0].getElementsByTagName("input")[2].value,s=new FormData;s.append("username",t.buffer._id),s.append("password",t.buffer.password),s.append("execution",r),s.append("geolocation",""),s.append("_eventId","submit"),t.axios({url:"/cas/login",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:s}).then((function(){window.location.replace("/")})).catch((function(){t.alertPromptMaster(t.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),t.loading=!1}))})).catch((function(){t.alertPromptMaster(t.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),t.loading=!1}))}else 302===e.data.status.code||403===e.data.status.code||404===e.data.status.code||429===e.data.status.code?(t.alertPromptMaster(e.data.status.result,"","pi-exclamation-triangle","#FDB5BA"),t.loading=!1):(t.alertPromptMaster(t.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),t.loading=!1)})).catch((function(){t.alertPromptMaster(t.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),t.loading=!1}))}else"getPasswordQuality"===e&&(this.loading=!0,this.axios({url:"/api/public/properties/settings",method:"GET"}).then((function(e){if(200===e.data.status.code){for(var a in e.data.data)"password.quality.capitalalphabet"===e.data.data[a]._id&&"true"===e.data.data[a].value?(t.passwordQualityCheck.capitalalphabet=!0,t.passwordQualityCheck.regex+="(?=.*[A-Z])"):"password.quality.smallalphabet"===e.data.data[a]._id&&"true"===e.data.data[a].value?(t.passwordQualityCheck.smallalphabet=!0,t.passwordQualityCheck.regex+="(?=.*[a-z])"):"password.quality.number"===e.data.data[a]._id&&"true"===e.data.data[a].value?(t.passwordQualityCheck.number=!0,t.passwordQualityCheck.regex+="(?=.*[0-9])"):"password.quality.specialchar"===e.data.data[a]._id&&"true"===e.data.data[a].value?(t.passwordQualityCheck.specialchar=!0,t.passwordQualityCheck.regex+="(?=.*[!@#$%^&*+=])"):"password.quality.length"===e.data.data[a]._id&&(t.passwordQualityCheck.length=e.data.data[a].value,t.passwordQualityCheck.regex+="(?=.{"+e.data.data[a].value+",})");t.passwordQualityCheck.regex+=".*$"}t.loading=!1})).catch((function(){t.alertPromptMaster(t.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),t.loading=!1})))},alertPromptMaster:function(e,t,a,r){var s=!0;"ltr"===this.$store.state.direction&&(s=!1),U.a.show({title:e,message:t,position:"center",icon:"pi "+a,backgroundColor:r,transitionIn:"fadeInLeft",rtl:s,layout:2,timeout:!1,progressBar:!1,buttons:[["<button class='service-notification-button my-3' style='border-radius: 6px;'>"+this.$t("confirm")+"</button>",function(e,t){e.hide({transitionOut:"fadeOutRight"},t)}]]})},confirmPromptMaster:function(e,t,a,r,s,o){var i=!0;"ltr"===this.$store.state.direction&&(i=!1),U.a.show({title:e,message:t,position:"center",icon:"pi "+a,backgroundColor:r,transitionIn:"fadeInLeft",rtl:i,layout:2,timeout:!1,progressBar:!1,buttons:[["<button class='service-notification-button mx-3 my-3' style='background: #22C55E; color: #FFFFFF; border-radius: 6px;'>"+this.$t("yes")+"</button>",function(e,t){e.hide({transitionOut:"fadeOutRight"},t),s(o)}],["<button class='service-notification-button mx-3 my-3' style='background: #EF4444; color: #FFFFFF; border-radius: 6px;'>"+this.$t("no")+"</button>",function(e,t){e.hide({transitionOut:"fadeOutRight"},t)}]]})},checkup:function(){var e=0,t=new RegExp(this.passwordQualityCheck.regex);""===this.buffer.password?(this.bufferErrors.password="p-invalid",e+=1):""===this.buffer.passwordRepeat?(this.bufferErrors.passwordRepeat="p-invalid",e+=1):this.buffer.password!==this.buffer.passwordRepeat?(this.bufferErrors.password="p-invalid",this.bufferErrors.passwordRepeat="p-invalid",e+=1):t.test(this.buffer.password)?(this.bufferErrors.password="",this.bufferErrors.passwordRepeat=""):(this.bufferErrors.password="p-invalid",e+=1),this.getUsernamePassword&&(""===this.buffer._id?(this.bufferErrors._id="p-invalid",e+=1):this.bufferErrors._id="",""===this.buffer.temporaryCode?(this.bufferErrors.temporaryCode="p-invalid",e+=1):this.bufferErrors.temporaryCode=""),e>0?this.alertPromptMaster(this.$t("invalidInputsError"),"","pi-exclamation-triangle","#FDB5BA"):this.changePasswordRequestMaster("changePassword")}}},I=a("6b0d"),D=a.n(I);const A=D()(V,[["render",B]]);t["default"]=A}}]);
//# sourceMappingURL=chunk-2d0a2db0.a81a2b14.js.map