(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29b22305"],{"217f":function(t,e,a){"use strict";a("dff2")},dff2:function(t,e,a){},f50e:function(t,e,a){"use strict";a.r(e);var o=a("7a23"),s={class:"grid"},r={class:"col-12"},i={class:"card"},l={class:"text-right"},n={class:"text-right"},c={class:"fa-stack fa-lg"};function d(t,e,a,d,u,p){var b=Object(o["K"])("Dropdown"),f=Object(o["K"])("Button"),h=Object(o["K"])("Toolbar"),m=Object(o["K"])("Column"),O=Object(o["K"])("InputText"),g=Object(o["K"])("DataTable"),j=Object(o["L"])("tooltip");return Object(o["C"])(),Object(o["j"])("div",s,[Object(o["k"])("div",r,[Object(o["k"])("div",i,[Object(o["k"])("h3",null,Object(o["O"])(t.$t("roles")),1),Object(o["o"])(h,null,{start:Object(o["U"])((function(){return[Object(o["o"])(b,{modelValue:u.selectedRoleOption,"onUpdate:modelValue":e[0]||(e[0]=function(t){return u.selectedRoleOption=t}),options:u.roleOptions,optionLabel:"name",placeholder:t.$t("chooseRole")},null,8,["modelValue","options","placeholder"]),Object(o["o"])(f,{label:t.$t("changeRole"),class:"p-button-success mx-1",onClick:e[1]||(e[1]=function(t){return p.changeRole()})},null,8,["label"])]})),end:Object(o["U"])((function(){return[Object(o["V"])(Object(o["o"])(f,{icon:"pi pi-filter-slash",class:"p-button-danger mb-2 mx-1",onClick:e[2]||(e[2]=function(t){return p.removeFilters("all")})},null,512),[[j,t.$t("removeFilters"),void 0,{top:!0}]])]})),_:1}),Object(o["o"])(g,{value:u.users,filterDisplay:"menu",dataKey:"_id",loading:u.loading,scrollDirection:"vertical",selection:u.selectedUsers,"onUpdate:selection":e[5]||(e[5]=function(t){return u.selectedUsers=t}),class:"p-datatable-gridlines",rowHover:!0,filters:u.filters,responsiveLayout:"scroll",scrollable:!1,scrollHeight:"50vh",paginatorPosition:"top",paginator:!0,rows:20,rowsPerPageOptions:[10,20,50,100,500],pageLinkSize:5},{empty:Object(o["U"])((function(){return[Object(o["k"])("div",l,Object(o["O"])(t.$t("noUsersFound")),1)]})),loading:Object(o["U"])((function(){return[Object(o["k"])("div",n,Object(o["O"])(t.$t("loadingUsers")),1)]})),default:Object(o["U"])((function(){return[Object(o["o"])(m,{selectionMode:"multiple",bodyClass:"text-center",style:{width:"5rem"}}),Object(o["o"])(m,{bodyClass:"text-center",style:{width:"5rem"}},{body:Object(o["U"])((function(t){var e=t.data;return[Object(o["k"])("span",c,[Object(o["k"])("i",{class:"fa fa-user fa-lg",style:Object(o["x"])(e.icon)},null,4)])]})),_:1}),Object(o["o"])(m,{field:"_id",header:t.$t("id"),bodyClass:"text-center",style:{flex:"0 0 10rem"}},{body:Object(o["U"])((function(t){var e=t.data;return[Object(o["n"])(Object(o["O"])(e._id),1)]})),filter:Object(o["U"])((function(a){var s=a.filterCallback;return[Object(o["o"])(O,{type:"text",modelValue:u.usersFilters._id,"onUpdate:modelValue":e[3]||(e[3]=function(t){return u.usersFilters._id=t}),onKeydown:Object(o["W"])((function(t){s(),p.rolesRequestMaster("getUsers")}),["enter"]),class:"p-column-filter",placeholder:t.$t("id")},null,8,["modelValue","onKeydown","placeholder"])]})),filterapply:Object(o["U"])((function(e){var a=e.filterCallback;return[Object(o["V"])(Object(o["o"])(f,{type:"button",icon:"pi pi-check",onClick:function(t){a(),p.rolesRequestMaster("getUsers")},class:"p-button-success"},null,8,["onClick"]),[[j,t.$t("applyFilter"),void 0,{top:!0}]])]})),filterclear:Object(o["U"])((function(e){var a=e.filterCallback;return[Object(o["V"])(Object(o["o"])(f,{type:"button",icon:"pi pi-times",onClick:function(t){a(),p.removeFilters("_id")},class:"p-button-danger"},null,8,["onClick"]),[[j,t.$t("removeFilter"),void 0,{top:!0}]])]})),_:1},8,["header"]),Object(o["o"])(m,{field:"role",header:t.$t("role"),bodyClass:"text-center",style:{flex:"0 0 10rem"}},{body:Object(o["U"])((function(t){var e=t.data;return[Object(o["n"])(Object(o["O"])(e.roleFa),1)]})),_:1},8,["header"]),Object(o["o"])(m,{field:"displayName",header:t.$t("persianName"),bodyClass:"text-center",style:{flex:"0 0 15rem"}},{body:Object(o["U"])((function(t){var e=t.data;return[Object(o["n"])(Object(o["O"])(e.displayName),1)]})),filter:Object(o["U"])((function(a){var s=a.filterCallback;return[Object(o["o"])(O,{type:"text",modelValue:u.usersFilters.displayName,"onUpdate:modelValue":e[4]||(e[4]=function(t){return u.usersFilters.displayName=t}),onKeydown:Object(o["W"])((function(t){s(),p.rolesRequestMaster("getUsers")}),["enter"]),class:"p-column-filter",placeholder:t.$t("persianName")},null,8,["modelValue","onKeydown","placeholder"])]})),filterapply:Object(o["U"])((function(e){var a=e.filterCallback;return[Object(o["V"])(Object(o["o"])(f,{type:"button",icon:"pi pi-check",onClick:function(t){a(),p.rolesRequestMaster("getUsers")},class:"p-button-success"},null,8,["onClick"]),[[j,t.$t("applyFilter"),void 0,{top:!0}]])]})),filterclear:Object(o["U"])((function(e){var a=e.filterCallback;return[Object(o["V"])(Object(o["o"])(f,{type:"button",icon:"pi pi-times",onClick:function(t){a(),p.removeFilters("displayName")},class:"p-button-danger"},null,8,["onClick"]),[[j,t.$t("removeFilter"),void 0,{top:!0}]])]})),_:1},8,["header"])]})),_:1},8,["value","loading","selection","filters"])])])])}var u=a("0393"),p=a("e6da"),b=a.n(p),f={name:"Users",data:function(){return{users:[],selectedUsers:[],usersFilters:{_id:"",displayName:""},roleOptions:[{id:"SUPERUSER",name:this.$t("superUser")},{id:"SUPPORTER",name:this.$t("supporter")},{id:"ADMIN",name:this.$t("admin")},{id:"PRESENTER",name:this.$t("presenter")},{id:"USER",name:this.$t("user")}],selectedRoleOption:{},loading:!0,filters:null}},mounted:function(){this.initiateFilters(),this.rolesRequestMaster("getUsers")},methods:{initiateFilters:function(){this.filters={_id:{value:null,matchMode:u["a"].CONTAINS},displayName:{value:null,matchMode:u["a"].CONTAINS}}},rolesRequestMaster:function(t){var e=this,a="";if("Fa"===this.$i18n.locale?a="fa":"En"===this.$i18n.locale&&(a="en"),"getUsers"===t){var o=[],s=[],r=[],i=[],l=[];this.loading=!0,this.axios({url:"/api/users",method:"GET",params:{searchUid:e.usersFilters._id,searchDisplayName:e.usersFilters.displayName,lang:a}}).then((function(t){if(200===t.data.status.code){for(var a=0;a<t.data.data.length;++a)"SUPERUSER"===t.data.data[a].role?(t.data.data[a].roleFa="مدیر کل",t.data.data[a].icon="color: #dc3545;",o.push(t.data.data[a])):"SUPPORTER"===t.data.data[a].role?(t.data.data[a].roleFa="پشتیبانی",t.data.data[a].icon="color: #28a745;",s.push(t.data.data[a])):"ADMIN"===t.data.data[a].role?(t.data.data[a].roleFa="مدیر",t.data.data[a].icon="color: #007bff;",r.push(t.data.data[a])):"PRESENTER"===t.data.data[a].role?(t.data.data[a].roleFa="ارائه دهنده",t.data.data[a].icon="color: #00f7f7;",i.push(t.data.data[a])):"USER"===t.data.data[a].role&&(t.data.data[a].roleFa="کاربر",t.data.data[a].icon="color: #ffc107;",l.push(t.data.data[a]));e.users=o.concat(s,r,i,l),e.loading=!1}else e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1})).catch((function(){e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1}))}else if("editRole"===t){var n=[];for(var c in this.selectedUsers)n.push(this.selectedUsers[c]._id);this.loading=!0,this.axios({url:"/api/roles/"+e.selectedRoleOption.id,method:"PUT",headers:{"Content-Type":"application/json"},params:{lang:a},data:JSON.stringify({names:n}).replace(/\\\\/g,"\\")}).then((function(t){200===t.data.status.code?(e.loading=!1,e.rolesRequestMaster("getUsers")):206===t.data.status.code?(e.alertPromptMaster(t.data.status.result,"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1,e.rolesRequestMaster("getUsers")):(e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1)})).catch((function(){e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1}))}},alertPromptMaster:function(t,e,a,o){var s=!0;"ltr"===this.$store.state.direction&&(s=!1),b.a.show({title:t,message:e,position:"center",icon:"pi "+a,backgroundColor:o,transitionIn:"fadeInLeft",rtl:s,layout:2,timeout:!1,progressBar:!1,buttons:[["<button class='service-notification-button my-3' style='border-radius: 6px;'>"+this.$t("confirm")+"</button>",function(t,e){t.hide({transitionOut:"fadeOutRight"},e)}]]})},confirmPromptMaster:function(t,e,a,o,s,r){var i=!0;"ltr"===this.$store.state.direction&&(i=!1),b.a.show({title:t,message:e,position:"center",icon:"pi "+a,backgroundColor:o,transitionIn:"fadeInLeft",rtl:i,layout:2,timeout:!1,progressBar:!1,buttons:[["<button class='service-notification-button mx-3 my-3' style='background: #22C55E; color: #FFFFFF; border-radius: 6px;'>"+this.$t("yes")+"</button>",function(t,e){t.hide({transitionOut:"fadeOutRight"},e),s(r)}],["<button class='service-notification-button mx-3 my-3' style='background: #EF4444; color: #FFFFFF; border-radius: 6px;'>"+this.$t("no")+"</button>",function(t,e){t.hide({transitionOut:"fadeOutRight"},e)}]]})},changeRole:function(){this.selectedUsers.length>0?0!==Object.keys(this.selectedRoleOption).length?this.confirmPromptMaster(this.$t("confirmPromptText"),this.$t("changeRole")+" "+this.$t("users"),"pi-question-circle","#F0EAAA",this.rolesRequestMaster,"editRole"):this.alertPromptMaster(this.$t("noRoleSelected"),"","pi-exclamation-triangle","#FDB5BA"):this.alertPromptMaster(this.$t("noUserSelected"),"","pi-exclamation-triangle","#FDB5BA")},removeFilters:function(t){"_id"===t?this.usersFilters._id="":"displayName"===t?this.usersFilters.displayName="":"all"===t&&(this.usersFilters._id="",this.usersFilters.displayName=""),this.rolesRequestMaster("getUsers")}}},h=(a("217f"),a("6b0d")),m=a.n(h);const O=m()(f,[["render",d],["__scopeId","data-v-3faae7bf"]]);e["default"]=O}}]);
//# sourceMappingURL=chunk-29b22305.b146cd55.js.map