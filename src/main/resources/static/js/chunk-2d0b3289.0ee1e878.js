(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b3289"],{"26d3":function(t,e,a){"use strict";a.r(e);var i=a("7a23"),s={class:"grid"},n={class:"col-12"},r={class:"card"},o={key:0,class:"text-center"},c={key:1},l={class:"formgrid grid"},u={class:"field p-fluid"},d=["for"],p={class:"flex align-items-center justify-content-center text-white border-circle mx-2",style:{"background-color":"#007bff"}},g=Object(i["k"])("i",{class:"bx bx-question-mark bx-sm"},null,-1),b=[g],h=["dir"];function m(t,e,a,g,m,f){var O=Object(i["K"])("ProgressSpinner"),j=Object(i["K"])("Dropdown"),v=Object(i["K"])("Button"),x=Object(i["K"])("Toolbar"),k=Object(i["K"])("InputText"),B=Object(i["K"])("InputNumber"),$=Object(i["K"])("InputSwitch"),y=Object(i["K"])("TabPanel"),M=Object(i["K"])("TabView"),q=Object(i["L"])("tooltip");return Object(i["C"])(),Object(i["j"])("div",s,[Object(i["k"])("div",n,[Object(i["k"])("div",r,[Object(i["k"])("h3",null,Object(i["O"])(t.$t("settings")),1),m.loading?(Object(i["C"])(),Object(i["j"])("div",o,[Object(i["o"])(O)])):(Object(i["C"])(),Object(i["j"])("div",c,[Object(i["o"])(x,null,{start:Object(i["U"])((function(){return[Object(i["o"])(j,{modelValue:m.selectedBackup,"onUpdate:modelValue":e[0]||(e[0]=function(t){return m.selectedBackup=t}),options:m.backupList,optionLabel:"name",placeholder:t.$t("chooseBackup")},null,8,["modelValue","options","placeholder"]),Object(i["V"])(Object(i["o"])(v,{icon:"bx bx-revision bx-sm",class:"p-button mx-1",onClick:e[1]||(e[1]=function(t){return f.backupHelper("restoreBackup")})},null,512),[[q,t.$t("restore"),void 0,{top:!0}]])]})),end:Object(i["U"])((function(){return[Object(i["V"])(Object(i["o"])(v,{icon:"bx bx-save bx-sm",class:"p-button mx-1",onClick:e[2]||(e[2]=function(t){return f.settingsRequestMaster("getBackup")})},null,512),[[q,t.$t("getBackup"),void 0,{top:!0}]]),Object(i["V"])(Object(i["o"])(v,{icon:"bx bx-reset bx-sm",class:"p-button-danger mx-1",onClick:e[3]||(e[3]=function(t){return f.backupHelper("reset")})},null,512),[[q,t.$t("reset"),void 0,{top:!0}]])]})),_:1}),Object(i["o"])(M,{activeIndex:m.tabActiveIndex,"onUpdate:activeIndex":e[4]||(e[4]=function(t){return m.tabActiveIndex=t})},{default:Object(i["U"])((function(){return[(Object(i["C"])(!0),Object(i["j"])(i["a"],null,Object(i["I"])(m.settings,(function(e,a){return Object(i["C"])(),Object(i["h"])(y,{key:a,header:e[0].group},{default:Object(i["U"])((function(){return[Object(i["k"])("div",l,[(Object(i["C"])(!0),Object(i["j"])(i["a"],null,Object(i["I"])(e,(function(e){return Object(i["C"])(),Object(i["j"])("div",{class:"field col-6",key:e._id},[Object(i["k"])("div",u,[Object(i["k"])("label",{for:e._id,class:"flex"},[Object(i["n"])(Object(i["O"])(e.description)+" ",1),Object(i["V"])((Object(i["C"])(),Object(i["j"])("span",p,b)),[[q,e.help,void 0,{top:!0}]])],8,d),"string"===e.type.class||"path"===e.type.class||"url"===e.type.class?(Object(i["C"])(),Object(i["h"])(k,{key:0,id:e._id,type:"text",modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t}},null,8,["id","modelValue","onUpdate:modelValue"])):"integer"===e.type.class?(Object(i["C"])(),Object(i["j"])("div",{key:1,dir:t.$store.state.reverseDirection},[Object(i["o"])(B,{id:e._id,modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t},showButtons:"",mode:"decimal"},null,8,["id","modelValue","onUpdate:modelValue"])],8,h)):"switch"===e.type.class?(Object(i["C"])(),Object(i["h"])($,{key:2,modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t},id:e._id},null,8,["modelValue","onUpdate:modelValue","id"])):"list"===e.type.class?(Object(i["C"])(),Object(i["h"])(j,{key:3,modelValue:e.value,"onUpdate:modelValue":function(t){return e.value=t},id:e._id,options:e.type.values,placeholder:e.value},null,8,["modelValue","onUpdate:modelValue","id","options","placeholder"])):Object(i["i"])("",!0)])])})),128))])]})),_:2},1032,["header"])})),128))]})),_:1},8,["activeIndex"]),Object(i["o"])(v,{label:t.$t("confirm"),class:"p-button-success mt-3 mx-1",onClick:e[5]||(e[5]=function(t){return f.backupHelper("editSettings")})},null,8,["label"])]))])])])}var f=a("e6da"),O=a.n(f),j={name:"Settings",data:function(){return{settings:[],backupList:[],selectedBackup:{},tabActiveIndex:0,loading:!1}},mounted:function(){this.settingsRequestMaster("getSettings"),this.settingsRequestMaster("getBackupList")},watch:{"$i18n.locale":{handler:function(){this.settingsRequestMaster("getSettings"),this.settingsRequestMaster("getBackupList")},deep:!0}},methods:{settingsRequestMaster:function(t){var e=this,a="";if("Fa"===this.$i18n.locale?a="fa":"En"===this.$i18n.locale&&(a="en"),"getSettings"===t){var i=[];this.settings=[],this.loading=!0,this.axios({url:"/api/properties/settings",method:"GET",params:{lang:a}}).then((function(t){if(200===t.data.status.code){for(var a in t.data.data)"switch"===t.data.data[a].type.class?"true"===t.data.data[a].value?t.data.data[a].value=!0:"false"===t.data.data[a].value&&(t.data.data[a].value=!1):"integer"===t.data.data[a].type.class&&(t.data.data[a].value=parseInt(t.data.data[a].value)),-1===i.indexOf(t.data.data[a].group)?(i.push(t.data.data[a].group),e.settings.push([t.data.data[a]])):e.settings[i.indexOf(t.data.data[a].group)].push(t.data.data[a]);e.loading=!1}else e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1})).catch((function(){e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1}))}else if("editSettings"===t){var s=[];for(var n in this.settings)for(var r in this.settings[n])"switch"===this.settings[n][r].type.class?this.settings[n][r].value?this.settings[n][r].value="true":this.settings[n][r].value="false":"integer"===this.settings[n][r].type.class&&(this.settings[n][r].value=this.settings[n][r].value.toString()),s.push({_id:this.settings[n][r]._id,value:this.settings[n][r].value});this.loading=!0,this.axios({url:"/api/properties/settings",method:"PUT",headers:{"Content-Type":"application/json"},params:{lang:a},data:JSON.stringify({editList:s}).replace(/\\\\/g,"\\")}).then((function(t){200===t.data.status.code?(e.loading=!1,e.settingsRequestMaster("getSettings")):(e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1,e.settingsRequestMaster("getSettings"))})).catch((function(){e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1,e.settingsRequestMaster("getSettings")}))}else"getBackupList"===t?(this.loading=!0,this.axios({url:"/api/properties/settings/backup",method:"GET",params:{lang:a}}).then((function(t){200===t.data.status.code?(e.backupList=t.data.data,e.loading=!1):(e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1)})).catch((function(){e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1}))):"getBackup"===t?(this.loading=!0,this.axios({url:"/api/properties/settings/backup",method:"POST",params:{lang:a}}).then((function(t){200===t.data.status.code?(e.loading=!1,e.settingsRequestMaster("getBackupList")):(e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1)})).catch((function(){e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1}))):"restoreBackup"===t?(this.loading=!0,this.axios({url:"/api/properties/settings/restore",method:"GET",params:{id:e.selectedBackup._id,lang:a}}).then((function(t){200===t.data.status.code?(e.loading=!1,e.settingsRequestMaster("getSettings")):(e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1)})).catch((function(){e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1}))):"reset"===t&&(this.loading=!0,this.axios({url:"/api/properties/settings/reset",method:"GET",params:{lang:a}}).then((function(t){200===t.data.status.code?(e.loading=!1,e.settingsRequestMaster("getSettings")):(e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1)})).catch((function(){e.alertPromptMaster(e.$t("requestError"),"","pi-exclamation-triangle","#FDB5BA"),e.loading=!1})))},alertPromptMaster:function(t,e,a,i){var s=!0;"ltr"===this.$store.state.direction&&(s=!1),O.a.show({title:t,message:e,position:"center",icon:"pi "+a,backgroundColor:i,transitionIn:"fadeInLeft",rtl:s,layout:2,timeout:!1,progressBar:!1,buttons:[["<button class='service-notification-button my-3' style='border-radius: 6px;'>"+this.$t("confirm")+"</button>",function(t,e){t.hide({transitionOut:"fadeOutRight"},e)}]]})},confirmPromptMaster:function(t,e,a,i,s,n){var r=!0;"ltr"===this.$store.state.direction&&(r=!1),O.a.show({title:t,message:e,position:"center",icon:"pi "+a,backgroundColor:i,transitionIn:"fadeInLeft",rtl:r,layout:2,timeout:!1,progressBar:!1,buttons:[["<button class='service-notification-button mx-3 my-3' style='background: #22C55E; color: #FFFFFF; border-radius: 6px;'>"+this.$t("yes")+"</button>",function(t,e){t.hide({transitionOut:"fadeOutRight"},e),s(n)}],["<button class='service-notification-button mx-3 my-3' style='background: #EF4444; color: #FFFFFF; border-radius: 6px;'>"+this.$t("no")+"</button>",function(t,e){t.hide({transitionOut:"fadeOutRight"},e)}]]})},backupHelper:function(t){"editSettings"===t?this.confirmPromptMaster(this.$t("confirmPromptText"),this.$t("edit")+" "+this.$t("settings"),"pi-question-circle","#F0EAAA",this.settingsRequestMaster,"editSettings"):"restoreBackup"===t?0!==Object.keys(this.selectedBackup).length?this.confirmPromptMaster(this.$t("confirmPromptText"),this.$t("restore")+" "+this.$t("backup"),"pi-question-circle","#F0EAAA",this.settingsRequestMaster,"restoreBackup"):this.alertPromptMaster(this.$t("noBackupSelected"),"","pi-exclamation-triangle","#FDB5BA"):"reset"===t&&this.confirmPromptMaster(this.$t("confirmPromptText"),this.$t("reset"),"pi-question-circle","#F0EAAA",this.settingsRequestMaster,"reset")}}},v=a("6b0d"),x=a.n(v);const k=x()(j,[["render",m]]);e["default"]=k}}]);
//# sourceMappingURL=chunk-2d0b3289.0ee1e878.js.map