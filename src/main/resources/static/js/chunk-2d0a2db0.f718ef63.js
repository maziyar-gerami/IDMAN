(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["chunk-2d0a2db0"], { "0060": function (e, t, r) { "use strict"; r.r(t); var s = r("7a23"), a = { class: "grid" }, o = { class: "col-12" }, n = { class: "card" }, i = { key: 0, class: "text-center" }, c = { key: 1 }, d = { class: "mt-3" }, l = { key: 0, class: "mt-5" }, u = { class: "formgrid grid" }, f = { class: "field col" }, b = { class: "field p-fluid" }, p = { for: "buffer._id" }, O = Object(s["k"])("span", { style: { color: "red" } }, " * ", -1), m = { class: "field col" }, j = { class: "field p-fluid" }, w = { for: "buffer.temporaryCode" }, h = Object(s["k"])("span", { style: { color: "red" } }, " * ", -1), g = { class: "formgrid grid" }, k = { class: "field col" }, v = { class: "field p-fluid" }, y = { for: "buffer.password" }, P = Object(s["k"])("span", { style: { color: "red" } }, " * ", -1), $ = { class: "mt-3" }, x = { class: "pl-2 ml-2 mt-0", style: { "line-height": "1.5" } }, E = { class: "field col" }, C = { class: "field p-fluid" }, R = { for: "buffer.passwordRepeat" }, F = Object(s["k"])("span", { style: { color: "red" } }, " * ", -1); function B(e, t, r, B, T, U) { var _ = Object(s["K"])("ProgressSpinner"), M = Object(s["K"])("InputText"), V = Object(s["K"])("Divider"), q = Object(s["K"])("Password"), I = Object(s["K"])("Button"); return Object(s["C"])(), Object(s["j"])("div", a, [Object(s["k"])("div", o, [Object(s["k"])("div", n, [Object(s["k"])("h3", null, Object(s["O"])(e.$t("changePassword")), 1), T.loading ? (Object(s["C"])(), Object(s["j"])("div", i, [Object(s["o"])(_)])) : (Object(s["C"])(), Object(s["j"])("div", c, [Object(s["k"])("div", d, [Object(s["k"])("p", null, Object(s["O"])(e.$t("changePasswordText1")), 1), Object(s["k"])("p", null, Object(s["O"])(e.$t("changePasswordText2")), 1), Object(s["k"])("p", null, [Object(s["n"])(Object(s["O"])(e.$t("changePasswordText3")) + " ", 1), Object(s["k"])("span", { style: { cursor: "pointer", color: "blue" }, onClick: t[0] || (t[0] = function (t) { return e.$router.push("/resetpassword") }) }, Object(s["O"])(e.$t("link")), 1), Object(s["n"])(" " + Object(s["O"])(e.$t("changePasswordText4")), 1)])]), T.getUsernamePassword ? (Object(s["C"])(), Object(s["j"])("div", l, [Object(s["k"])("div", u, [Object(s["k"])("div", f, [Object(s["k"])("div", b, [Object(s["k"])("label", p, [Object(s["n"])(Object(s["O"])(e.$t("employeeNumber")), 1), O]), Object(s["o"])(M, { id: "buffer._id", type: "text", class: Object(s["w"])(T.bufferErrors._id), modelValue: T.buffer._id, "onUpdate:modelValue": t[1] || (t[1] = function (e) { return T.buffer._id = e }) }, null, 8, ["class", "modelValue"])])]), Object(s["k"])("div", m, [Object(s["k"])("div", j, [Object(s["k"])("label", w, [Object(s["n"])(Object(s["O"])(e.$t("temporaryCode")), 1), h]), Object(s["o"])(M, { id: "buffer.temporaryCode", type: "text", class: Object(s["w"])(T.bufferErrors.temporaryCode), modelValue: T.buffer.temporaryCode, "onUpdate:modelValue": t[2] || (t[2] = function (e) { return T.buffer.temporaryCode = e }) }, null, 8, ["class", "modelValue"])])])])])) : Object(s["i"])("", !0), Object(s["k"])("div", { class: Object(s["w"])(T.getUsernamePassword ? "" : "mt-5") }, [Object(s["k"])("div", g, [Object(s["k"])("div", k, [Object(s["k"])("div", v, [Object(s["k"])("label", y, [Object(s["n"])(Object(s["O"])(e.$t("password")), 1), P]), Object(s["o"])(q, { id: "buffer.password", class: Object(s["w"])(T.bufferErrors.password), modelValue: T.buffer.password, "onUpdate:modelValue": t[3] || (t[3] = function (e) { return T.buffer.password = e }), toggleMask: !0, autocomplete: "off" }, { header: Object(s["U"])((function () { return [Object(s["k"])("h6", null, Object(s["O"])(e.$t("passwordStrength")), 1)] })), footer: Object(s["U"])((function () { return [Object(s["o"])(V), Object(s["k"])("p", $, Object(s["O"])(e.$t("passwordRequirement")), 1), Object(s["k"])("ul", x, [Object(s["k"])("li", null, Object(s["O"])(e.$t("passwordRequirementText1")), 1), Object(s["k"])("li", null, Object(s["O"])(e.$t("passwordRequirementText2")), 1), Object(s["k"])("li", null, Object(s["O"])(e.$t("passwordRequirementText3")), 1), Object(s["k"])("li", null, Object(s["O"])(e.$t("passwordRequirementText4")), 1)])] })), _: 1 }, 8, ["class", "modelValue"])])]), Object(s["k"])("div", E, [Object(s["k"])("div", C, [Object(s["k"])("label", R, [Object(s["n"])(Object(s["O"])(e.$t("passwordRepeat")), 1), F]), Object(s["o"])(q, { id: "buffer.passwordRepeat", class: Object(s["w"])(T.bufferErrors.passwordRepeat), modelValue: T.buffer.passwordRepeat, "onUpdate:modelValue": t[4] || (t[4] = function (e) { return T.buffer.passwordRepeat = e }), toggleMask: !0, onpaste: "return false;", ondrop: "return false;", autocomplete: "off" }, null, 8, ["class", "modelValue"])])])]), Object(s["o"])(I, { label: e.$t("confirm"), class: "p-button-success mt-3 mx-1", onClick: t[5] || (t[5] = function (e) { return U.checkup() }) }, null, 8, ["label"])], 2)]))])])]) } var T = r("e6da"), U = r.n(T), _ = { name: "ChangePassword", data: function () { return { buffer: { _id: "", temporaryCode: "", password: "", passwordRepeat: "" }, bufferErrors: { _id: "", temporaryCode: "", password: "", passwordRepeat: "" }, loading: !1, getUsernamePassword: !1 } }, mounted: function () { var e = new URL(window.location.href); "undefined" !== typeof e.searchParams.get("i") && null !== e.searchParams.get("i") || (this.getUsernamePassword = !0) }, methods: { changePasswordRequestMaster: function (e) { var t = this, r = ""; if ("Fa" === this.$i18n.locale ? r = "fa" : "En" === this.$i18n.locale && (r = "en"), "changePassword" === e) { if (!this.getUsernamePassword) { var s = new URL(window.location.href), a = decodeURIComponent(escape(window.atob(s.searchParams.get("i")))).split(" - "); this.buffer._id = a[0], this.buffer.temporaryCode = a[1] } this.loading = !0, this.axios({ url: "/api/public/changePassword", method: "PUT", params: { lang: r }, headers: { "Content-Type": "application/json" }, data: JSON.stringify({ userId: t.buffer._id, currentPassword: t.buffer.temporaryCode, newPassword: t.buffer.password }).replace(/\\\\/g, "\\") }).then((function (e) { if (200 === e.data.status.code) { var r = 0, s = window.setInterval((function () { 1 === r && clearInterval(s), ++r }), 2e3); t.axios({ url: "/cas/login?service=" + window.location.protocol + "//" + window.location.hostname + "/login/cas", method: "GET" }).then((function (e) { var r = document.createElement("html"); r.innerHTML = e.data; var s = r.getElementsByTagName("form")[0].getElementsByTagName("input")[2].value, a = new FormData; a.append("username", t.buffer._id), a.append("password", t.buffer.password), a.append("execution", s), a.append("geolocation", ""), a.append("_eventId", "submit"), t.axios({ url: "/cas/login", method: "POST", headers: { "Content-Type": "multipart/form-data" }, data: a }).then((function () { t.$router.push("/") })).catch((function () { t.alertPromptMaster(t.$t("requestError"), "", "pi-exclamation-triangle", "#FDB5BA"), t.loading = !1 })) })).catch((function () { t.alertPromptMaster(t.$t("requestError"), "", "pi-exclamation-triangle", "#FDB5BA"), t.loading = !1 })) } else 302 === e.data.status.code || 403 === e.data.status.code || 404 === e.data.status.code || 429 === e.data.status.code ? (t.alertPromptMaster(e.data.status.result, "", "pi-exclamation-triangle", "#FDB5BA"), t.loading = !1) : (t.alertPromptMaster(t.$t("requestError"), "", "pi-exclamation-triangle", "#FDB5BA"), t.loading = !1) })).catch((function () { t.alertPromptMaster(t.$t("requestError"), "", "pi-exclamation-triangle", "#FDB5BA"), t.loading = !1 })) } }, alertPromptMaster: function (e, t, r, s) { var a = !0; "ltr" === this.$store.state.direction && (a = !1), U.a.show({ title: e, message: t, position: "center", icon: "pi " + r, backgroundColor: s, transitionIn: "fadeInLeft", rtl: a, layout: 2, timeout: !1, progressBar: !1, buttons: [["<button class='service-notification-button my-3' style='border-radius: 6px;'>" + this.$t("confirm") + "</button>", function (e, t) { e.hide({ transitionOut: "fadeOutRight" }, t) }]] }) }, confirmPromptMaster: function (e, t, r, s, a, o) { var n = !0; "ltr" === this.$store.state.direction && (n = !1), U.a.show({ title: e, message: t, position: "center", icon: "pi " + r, backgroundColor: s, transitionIn: "fadeInLeft", rtl: n, layout: 2, timeout: !1, progressBar: !1, buttons: [["<button class='service-notification-button mx-3 my-3' style='background: #22C55E; color: #FFFFFF; border-radius: 6px;'>" + this.$t("yes") + "</button>", function (e, t) { e.hide({ transitionOut: "fadeOutRight" }, t), a(o) }], ["<button class='service-notification-button mx-3 my-3' style='background: #EF4444; color: #FFFFFF; border-radius: 6px;'>" + this.$t("no") + "</button>", function (e, t) { e.hide({ transitionOut: "fadeOutRight" }, t) }]] }) }, checkup: function () { var e = 0, t = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/; "" === this.buffer.password ? (this.bufferErrors.password = "p-invalid", e += 1) : "" === this.buffer.passwordRepeat ? (this.bufferErrors.passwordRepeat = "p-invalid", e += 1) : this.buffer.password !== this.buffer.passwordRepeat ? (this.bufferErrors.password = "p-invalid", this.bufferErrors.passwordRepeat = "p-invalid", e += 1) : t.test(this.buffer.password) ? (this.bufferErrors.password = "", this.bufferErrors.passwordRepeat = "") : (this.bufferErrors.password = "p-invalid", e += 1), this.getUsernamePassword && ("" === this.buffer._id ? (this.bufferErrors._id = "p-invalid", e += 1) : this.bufferErrors._id = "", "" === this.buffer.temporaryCode ? (this.bufferErrors.temporaryCode = "p-invalid", e += 1) : this.bufferErrors.temporaryCode = ""), e > 0 ? this.alertPromptMaster(this.$t("invalidInputsError"), "", "pi-exclamation-triangle", "#FDB5BA") : this.changePasswordRequestMaster("changePassword") } } }, M = r("6b0d"), V = r.n(M); const q = V()(_, [["render", B]]); t["default"] = q } }]);
//# sourceMappingURL=chunk-2d0a2db0.f718ef63.js.map